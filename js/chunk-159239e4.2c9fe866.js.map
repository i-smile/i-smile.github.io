{"version":3,"sources":["webpack:///./src/views/Login.vue?61a8","webpack:///src/views/Login.vue","webpack:///./src/views/Login.vue?5da6","webpack:///./src/views/Login.vue","webpack:///./src/views/Login.vue?2dbe","webpack:///./node_modules/vant/es/toast/Toast.js","webpack:///./node_modules/vant/es/toast/index.js","webpack:///./node_modules/vant/es/toast/style/index.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","_v","staticRenderFns","name","components","data","code","computed","created","corpId","onSuccess","console","log","info","vm","doLogin","methods","component","_createNamespace","create","createComponent","bem","mixins","props","icon","String","className","iconPrefix","loadingType","forbidClick","Boolean","closeOnClick","message","Number","type","default","position","transition","lockScroll","clickable","mounted","toggleClickable","destroyed","watch","value","onClick","close","action","document","body","classList","onAfterEnter","$emit","onOpened","onAfterLeave","genIcon","h","hasIcon","genMessage","_ref","arguments","defaultOptions","mask","onClose","duration","undefined","getContainer","overlayStyle","queue","multiple","currentOptions","parseOptions","createInstance","length","toast","extend","el","createElement","$on","push","transformOptions","options","overlay","updateZIndex","clear","clearTimeout","timer","filter","item","parent","$el","parentNode","removeChild","$destroy","setTimeout","forEach","method","all","shift","setDefaultOptions","resetDefaultOptions","allowMultiple","install","use","prototype","$toast"],"mappings":"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","file":"js/chunk-159239e4.2c9fe866.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"page-login\"},[_c('div',{staticClass:\"loading-wrap\"},[_c('van-loading',{attrs:{\"size\":\"24px\"}},[_vm._v(\"加载中...\")])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"page-login\">\n    <div class=\"loading-wrap\">\n      <van-loading size=\"24px\">加载中...</van-loading>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Vue from 'vue'\nimport { mapState, mapActions } from 'vuex'\nimport qs from 'querystring'\nimport * as dd from 'dingtalk-jsapi'\nimport { Button, Toast, Dialog, Loading } from 'vant'\nimport request from '@/utils/request'\nimport { setToken } from '@/utils/token'\n\nVue.use(Toast)\n  .use(Dialog)\n  .use(Loading)\n\nexport default {\n  name: 'login',\n  components: {},\n  data() {\n    return {\n      code: ''\n    }\n  },\n  computed: {},\n  created() {\n    const vm = this\n    dd.runtime.permission.requestAuthCode({\n      // corpId: 'ding7404f5e573a05af035c2f4657eb6378f',\n      corpId: 'ding6ab7fb6fbb656216acaaa37764f94726', // 测试用 （飞霞科技）\n      onSuccess: function(info) {\n        console.log(info)\n        vm.doLogin(info.code)\n      }\n    })\n  },\n  methods: {\n    ...mapActions('login', ['getLoginUserInfo']),\n    async doLogin(code) {\n      const params = {\n        code\n      }\n      const response = await request(`/auth/dingDingLogin?${qs.stringify(params)}`, {\n        method: 'POST'\n      })\n      console.log('Login response', response)\n      if (response.resultCode === 200) {\n        await setToken(response.data.token)\n        Toast.success({ message: response.message, duration: 600 })\n        setTimeout(async () => {\n          await this.getLoginUserInfo()\n          this.$router.push({\n            name: 'punish'\n          })\n        }, 100)\n      } else {\n        Toast.fail(response.message)\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.loading-wrap {\n  padding: 100px 0;\n  text-align: center;\n}\n.bottom {\n  margin-top: 100px;\n  width: 10rem;\n  text-align: center;\n  .van-button {\n    width: 70%;\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Login.vue?vue&type=template&id=fd4a41de&scoped=true&\"\nimport script from \"./Login.vue?vue&type=script&lang=js&\"\nexport * from \"./Login.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Login.vue?vue&type=style&index=0&id=fd4a41de&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"fd4a41de\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=style&index=0&id=fd4a41de&lang=less&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=style&index=0&id=fd4a41de&lang=less&scoped=true&\"","import { createNamespace, isDef } from '../utils';\nimport { PopupMixin } from '../mixins/popup';\nimport Icon from '../icon';\nimport Loading from '../loading';\n\nvar _createNamespace = createNamespace('toast'),\n    createComponent = _createNamespace[0],\n    bem = _createNamespace[1];\n\nexport default createComponent({\n  mixins: [PopupMixin],\n  props: {\n    icon: String,\n    className: null,\n    iconPrefix: String,\n    loadingType: String,\n    forbidClick: Boolean,\n    closeOnClick: Boolean,\n    message: [Number, String],\n    type: {\n      type: String,\n      default: 'text'\n    },\n    position: {\n      type: String,\n      default: 'middle'\n    },\n    transition: {\n      type: String,\n      default: 'van-fade'\n    },\n    lockScroll: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data: function data() {\n    return {\n      clickable: false\n    };\n  },\n  mounted: function mounted() {\n    this.toggleClickable();\n  },\n  destroyed: function destroyed() {\n    this.toggleClickable();\n  },\n  watch: {\n    value: 'toggleClickable',\n    forbidClick: 'toggleClickable'\n  },\n  methods: {\n    onClick: function onClick() {\n      if (this.closeOnClick) {\n        this.close();\n      }\n    },\n    toggleClickable: function toggleClickable() {\n      var clickable = this.value && this.forbidClick;\n\n      if (this.clickable !== clickable) {\n        this.clickable = clickable;\n        var action = clickable ? 'add' : 'remove';\n        document.body.classList[action]('van-toast--unclickable');\n      }\n    },\n\n    /* istanbul ignore next */\n    onAfterEnter: function onAfterEnter() {\n      this.$emit('opened');\n\n      if (this.onOpened) {\n        this.onOpened();\n      }\n    },\n    onAfterLeave: function onAfterLeave() {\n      this.$emit('closed');\n    },\n    genIcon: function genIcon() {\n      var h = this.$createElement;\n      var icon = this.icon,\n          type = this.type,\n          iconPrefix = this.iconPrefix,\n          loadingType = this.loadingType;\n      var hasIcon = icon || type === 'success' || type === 'fail';\n\n      if (hasIcon) {\n        return h(Icon, {\n          \"class\": bem('icon'),\n          \"attrs\": {\n            \"classPrefix\": iconPrefix,\n            \"name\": icon || type\n          }\n        });\n      }\n\n      if (type === 'loading') {\n        return h(Loading, {\n          \"class\": bem('loading'),\n          \"attrs\": {\n            \"type\": loadingType\n          }\n        });\n      }\n    },\n    genMessage: function genMessage() {\n      var h = this.$createElement;\n      var type = this.type,\n          message = this.message;\n\n      if (!isDef(message) || message === '') {\n        return;\n      }\n\n      if (type === 'html') {\n        return h(\"div\", {\n          \"class\": bem('text'),\n          \"domProps\": {\n            \"innerHTML\": message\n          }\n        });\n      }\n\n      return h(\"div\", {\n        \"class\": bem('text')\n      }, [message]);\n    }\n  },\n  render: function render() {\n    var _ref;\n\n    var h = arguments[0];\n    return h(\"transition\", {\n      \"attrs\": {\n        \"name\": this.transition\n      },\n      \"on\": {\n        \"afterEnter\": this.onAfterEnter,\n        \"afterLeave\": this.onAfterLeave\n      }\n    }, [h(\"div\", {\n      \"directives\": [{\n        name: \"show\",\n        value: this.value\n      }],\n      \"class\": [bem([this.position, (_ref = {}, _ref[this.type] = !this.icon, _ref)]), this.className],\n      \"on\": {\n        \"click\": this.onClick\n      }\n    }, [this.genIcon(), this.genMessage()])]);\n  }\n});","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport Vue from 'vue';\nimport VueToast from './Toast';\nimport { isObj, isServer } from '../utils';\nvar defaultOptions = {\n  icon: '',\n  type: 'text',\n  mask: false,\n  value: true,\n  message: '',\n  className: '',\n  onClose: null,\n  onOpened: null,\n  duration: 3000,\n  iconPrefix: undefined,\n  position: 'middle',\n  transition: 'van-fade',\n  forbidClick: false,\n  loadingType: undefined,\n  getContainer: 'body',\n  overlayStyle: null,\n  closeOnClick: false\n};\nvar queue = [];\nvar multiple = false;\n\nvar currentOptions = _extends({}, defaultOptions);\n\nfunction parseOptions(message) {\n  if (isObj(message)) {\n    return message;\n  }\n\n  return {\n    message: message\n  };\n}\n\nfunction createInstance() {\n  /* istanbul ignore if */\n  if (isServer) {\n    return {};\n  }\n\n  if (!queue.length || multiple) {\n    var toast = new (Vue.extend(VueToast))({\n      el: document.createElement('div')\n    });\n    toast.$on('input', function (value) {\n      toast.value = value;\n    });\n    queue.push(toast);\n  }\n\n  return queue[queue.length - 1];\n} // transform toast options to popup props\n\n\nfunction transformOptions(options) {\n  options = _extends({}, options);\n  options.overlay = options.mask;\n  delete options.mask;\n  delete options.duration;\n  return options;\n}\n\nfunction Toast(options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var toast = createInstance(); // should add z-index if previous toast has not disappeared\n\n  if (toast.value) {\n    toast.updateZIndex();\n  }\n\n  options = _extends({}, currentOptions, {}, parseOptions(options), {\n    clear: function clear() {\n      toast.value = false;\n\n      if (options.onClose) {\n        options.onClose();\n      }\n\n      if (multiple && !isServer) {\n        toast.$on('closed', function () {\n          clearTimeout(toast.timer);\n          queue = queue.filter(function (item) {\n            return item !== toast;\n          });\n          var parent = toast.$el.parentNode;\n\n          if (parent) {\n            parent.removeChild(toast.$el);\n          }\n\n          toast.$destroy();\n        });\n      }\n    }\n  });\n\n  _extends(toast, transformOptions(options));\n\n  clearTimeout(toast.timer);\n\n  if (options.duration > 0) {\n    toast.timer = setTimeout(function () {\n      toast.clear();\n    }, options.duration);\n  }\n\n  return toast;\n}\n\nvar createMethod = function createMethod(type) {\n  return function (options) {\n    return Toast(_extends({\n      type: type\n    }, parseOptions(options)));\n  };\n};\n\n['loading', 'success', 'fail'].forEach(function (method) {\n  Toast[method] = createMethod(method);\n});\n\nToast.clear = function (all) {\n  if (queue.length) {\n    if (all) {\n      queue.forEach(function (toast) {\n        toast.clear();\n      });\n      queue = [];\n    } else if (!multiple) {\n      queue[0].clear();\n    } else {\n      queue.shift().clear();\n    }\n  }\n};\n\nToast.setDefaultOptions = function (options) {\n  _extends(currentOptions, options);\n};\n\nToast.resetDefaultOptions = function () {\n  currentOptions = _extends({}, defaultOptions);\n};\n\nToast.allowMultiple = function (value) {\n  if (value === void 0) {\n    value = true;\n  }\n\n  multiple = value;\n};\n\nToast.install = function () {\n  Vue.use(VueToast);\n};\n\nVue.prototype.$toast = Toast;\nexport default Toast;","import '../../style/base.css';\nimport '../../popup/index.css';\nimport '../../image/index.css';\nimport '../index.css';"],"sourceRoot":""}